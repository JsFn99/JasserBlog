---
import Base from "../../layouts/Base.astro";

const posts = await Astro.glob("./p*.md");

const formatDate = (date: string) => {
    const options = { year: "numeric", month: "long", day: "numeric" };
    return new Date(date).toLocaleDateString("fr-FR", options);
};
---

<Base title="Mes articles">
    <h1 class="m-6 text-6xl font-serif">Mes articles</h1>

    <div class="m-6 grid gap-8 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
        {
            posts
                .sort(
                    (a, b) =>
                        new Date(b.frontmatter.date) -
                        new Date(a.frontmatter.date),
                )
                .map((post) => (
                    <div
                        class="flex flex-col border-b pb-4 mb-4"
                        key={post.frontmatter.date}
                    >
                        <a
                            class="flex flex-col hover:underline"
                            href={post.url}
                        >
                            <img
                                class="w-full h-52 object-cover mb-4"
                                src={post.frontmatter.image}
                                alt={post.frontmatter.title}
                            />
                            <h2 class="text-2xl font-serif mb-2">
                                {post.frontmatter.title}
                            </h2>
                            <p class="text-gray-700 text-sm mb-2">
                                {formatDate(post.frontmatter.date)}
                            </p>
                        </a>
                    </div>
                ))
        }
    </div>
</Base>
